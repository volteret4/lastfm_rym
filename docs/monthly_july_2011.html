<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Last.fm Stats - July 2011</title>
    <link rel="icon" type="image/png" href="images/music.png">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1e1e2e;
            color: #cdd6f4;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: #181825;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: #1e1e2e;
            padding: 20px 30px;
            border-bottom: 2px solid #cba6f7;
            display: flex;
            justify-content: space-between;
            align-items: center;
            min-height: 80px;
        }

        .header-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex-grow: 1;
        }

        h1 {
            font-size: 1.8em;
            color: #cba6f7;
            margin: 0;
            text-align: center;
        }

        .nav-buttons {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        .nav-button {
            padding: 8px 16px;
            background: #313244;
            color: #cdd6f4;
            border: 2px solid #45475a;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9em;
            font-weight: 600;
            text-decoration: none;
            display: inline-block;
        }

        .nav-button:hover {
            border-color: #cba6f7;
            background: #45475a;
            color: #cdd6f4;
        }

        .nav-button.current {
            background: #cba6f7;
            color: #1e1e2e;
            border-color: #cba6f7;
        }

        .user-button {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #cba6f7;
            color: #1e1e2e;
            border: none;
            cursor: pointer;
            font-size: 1.2em;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            flex-shrink: 0;
        }

        .user-button:hover {
            background: #b4a3e8;
            transform: scale(1.1);
        }

        .user-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .user-modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #1e1e2e;
            border-radius: 12px;
            padding: 30px;
            width: 90%;
            max-width: 400px;
            border: 2px solid #cba6f7;
        }

        .user-modal-header {
            color: #cba6f7;
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 20px;
            text-align: center;
        }

        .user-modal-close {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            color: #cdd6f4;
            font-size: 1.5em;
            cursor: pointer;
            padding: 0;
        }

        .user-modal-close:hover {
            color: #cba6f7;
        }

        .user-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .user-option {
            padding: 12px 20px;
            background: #313244;
            border: 2px solid #45475a;
            border-radius: 8px;
            color: #cdd6f4;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .user-option:hover {
            border-color: #cba6f7;
            background: #45475a;
        }

        .user-option.selected {
            background: #cba6f7;
            color: #1e1e2e;
            border-color: #cba6f7;
        }

        .controls {
            padding: 20px 30px;
            background: #1e1e2e;
            border-bottom: 1px solid #313244;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
        }

        .control-group {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .control-group label {
            color: #cba6f7;
            font-weight: 600;
        }

        .category-filters {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .category-filter {
            padding: 8px 16px;
            background: #313244;
            color: #cdd6f4;
            border: 2px solid #45475a;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9em;
            font-weight: 600;
        }

        .category-filter:hover {
            border-color: #cba6f7;
            background: #45475a;
        }

        .category-filter.active {
            background: #cba6f7;
            color: #1e1e2e;
            border-color: #cba6f7;
        }

        .period-header {
            background: #1e1e2e;
            padding: 25px 30px;
            border-bottom: 2px solid #cba6f7;
        }

        .period-header h2 {
            color: #cba6f7;
            font-size: 1.5em;
            margin-bottom: 8px;
        }

        .period-info {
            color: #a6adc8;
            font-size: 0.9em;
        }

        .stats-container {
            padding: 30px;
        }

        .categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 25px;
        }

        .category {
            background: #1e1e2e;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #313244;
            display: none;
        }

        .category.visible {
            display: block;
        }

        .category h3 {
            color: #cba6f7;
            font-size: 1.2em;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #cba6f7;
        }

        .item {
            padding: 12px;
            margin-bottom: 10px;
            background: #181825;
            border-radius: 8px;
            border-left: 3px solid #45475a;
            transition: all 0.3s;
            cursor: pointer;
        }

        .item:hover {
            transform: translateX(5px);
            border-left-color: #cba6f7;
        }

        .item.highlighted {
            border-left-color: #cba6f7;
            background: #1a1826;
        }

        .item-name {
            font-weight: 600;
            color: #cdd6f4;
            font-size: 1em;
        }

        .item-meta {
            margin-top: 8px;
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            align-items: center;
        }

        .badge {
            background: #45475a;
            color: #cdd6f4;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
        }

        .user-badge {
            background: #313244;
            color: #a6adc8;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.75em;
            border: 1px solid #45475a;
        }

        .user-badge.highlighted-user {
            background: #cba6f7;
            color: #1e1e2e;
            border-color: #cba6f7;
        }

        .expandable {
            position: relative;
        }

        .expandable::after {
            content: '‚ñº';
            position: absolute;
            right: 12px;
            top: 12px;
            color: #6c7086;
            font-size: 0.8em;
        }

        .expandable.expanded::after {
            content: '‚ñ≤';
        }

        .details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            padding: 0 15px;
            margin-top: 10px;
        }

        .details.expanded {
            max-height: 400px;
            overflow-y: auto;
            border-top: 1px solid #313244;
            padding-top: 15px;
        }

        .detail-section {
            margin-bottom: 15px;
        }

        .detail-title {
            color: #f9e2af;
            font-size: 0.9em;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .detail-list {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .detail-item {
            background: #181825;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            color: #a6adc8;
        }

        .novelty-section {
            margin-bottom: 25px;
        }

        .novelty-section h4 {
            color: #a6e3a1;
            font-size: 1.05em;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid #45475a;
        }

        .novelty-subsection {
            margin-bottom: 20px;
        }

        .novelty-subsection h5 {
            color: #f9e2af;
            font-size: 0.95em;
            margin-bottom: 10px;
        }

        .novelty-empty {
            color: #6c7086;
            font-style: italic;
            text-align: center;
            padding: 20px;
        }

        .artists-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #1e1e2e;
            border: 2px solid #cba6f7;
            border-radius: 12px;
            padding: 20px;
            max-width: 500px;
            max-height: 400px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: 0 8px 32px rgba(0,0,0,0.5);
        }

        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 999;
        }

        .popup-header {
            color: #cba6f7;
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 15px;
            border-bottom: 1px solid #313244;
            padding-bottom: 10px;
        }

        .popup-close {
            float: right;
            background: none;
            border: none;
            color: #cdd6f4;
            font-size: 1.2em;
            cursor: pointer;
            padding: 0;
            margin-top: -5px;
        }

        .popup-close:hover {
            color: #cba6f7;
        }

        .artist-list {
            list-style: none;
            padding: 0;
        }

        .artist-list li {
            padding: 8px 12px;
            background: #181825;
            margin-bottom: 5px;
            border-radius: 6px;
            border-left: 3px solid #45475a;
        }

        .no-data {
            text-align: center;
            padding: 40px;
            color: #6c7086;
            font-style: italic;
        }

        .last-update {
            text-align: center;
            padding: 20px;
            color: #6c7086;
            font-size: 0.85em;
            border-top: 1px solid #313244;
        }

        @media (max-width: 768px) {
            .categories {
                grid-template-columns: 1fr;
            }

            .controls {
                flex-direction: column;
                align-items: stretch;
            }

            .category-filters {
                justify-content: center;
            }

            .artists-popup {
                max-width: 90%;
                max-height: 80%;
            }

            header {
                flex-direction: column;
                gap: 15px;
            }

            .nav-buttons {
                order: -1;
            }

            .user-button {
                order: 1;
                align-self: flex-end;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <h1>üìä RYM Hispano Estad√≠sticas</h1>
                <div class="nav-buttons">
                    <a href="esta-semana.html" class="nav-button">TEMPORALES</a>
                    <a href="index.html#grupo" class="nav-button">GRUPO</a>
                    <a href="index.html#about" class="nav-button">ACERCA DE</a>
                </div>
            </div>
            <button class="user-button" id="userButton">üë§</button>
        </header>

        <!-- Modal de selecci√≥n de usuario -->
        <div class="user-modal" id="userModal">
            <div class="user-modal-content">
                <button class="user-modal-close" id="userModalClose">√ó</button>
                <div class="user-modal-header">Seleccionar Usuario</div>
                <div class="user-options" id="userOptions">
                    <!-- Se llenar√°n din√°micamente -->
                </div>
            </div>
        </div>

        <div class="controls">
            <div class="control-group">
                <label>Mostrar categor√≠as:</label>
                <div class="category-filters">
                    <button class="category-filter active" data-category="artists">Artistas</button><button class="category-filter " data-category="tracks">Canciones</button><button class="category-filter " data-category="albums">√Ålbumes</button><button class="category-filter " data-category="genres">G√©neros</button><button class="category-filter " data-category="labels">Sellos</button><button class="category-filter " data-category="years">A√±os</button><button class="category-filter " data-category="novelties">Novedades</button>
                </div>
            </div>
        </div>

        <div class="period-header">
            <h2>July 2011</h2>
            <p class="period-info">
                <span id="dateRange"></span> |
                <span id="totalScrobbles"></span> scrobbles totales
            </p>
        </div>

        <div class="stats-container">
            <div class="categories" id="categoriesContainer">
                <!-- Se llenar√° din√°micamente -->
            </div>
        </div>

        <div class="last-update">
            Generado: <span id="generatedAt"></span>
        </div>
    </div>

    <script>
        // Usuarios reales del entorno LASTFM_USERS
        const availableUsers = ["alberto_gu", "EliasJ72", "Frikomid", "GabredMared", "Lonsonxd", "Nubis84", "paqueradejere", "Rocky_stereo", "sdecandelario"];
        const stats = {
  "total_scrobbles": 1634,
  "artists": [
    {
      "name": "Led Zeppelin",
      "count": 37,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 1,
        "sdecandelario": 36
      }
    },
    {
      "name": "Enforcer",
      "count": 20,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 1,
        "sdecandelario": 19
      }
    }
  ],
  "tracks": [
    {
      "name": "Enforcer - Diamonds",
      "count": 2,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 1,
        "sdecandelario": 1
      }
    }
  ],
  "albums": [],
  "genres": [
    {
      "name": "heavy metal",
      "count": 720,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 6,
        "sdecandelario": 714
      },
      "user_artists": {
        "Nubis84": [
          "Masterplan",
          "Megadeth",
          "East Hastings",
          "Siren"
        ],
        "sdecandelario": [
          "Mercyful Fate",
          "Scorpions",
          "Judas Priest",
          "Omen",
          "Rainbow",
          "Mot√∂rhead",
          "Iron Maiden",
          "Santa",
          "U.D.O.",
          "King Diamond",
          "Hell",
          "Riot",
          "Quiet Riot",
          "Saxon",
          "Rage",
          "W.A.S.P.",
          "Manilla Road",
          "Steel Horse",
          "Vicious Rumors",
          "Impellitteri",
          "Rata Blanca",
          "Sobredosis",
          "Running Wild",
          "M√∂tley Cr√ºe",
          "Raven",
          "Tokyo Blade",
          "Helloween",
          "High Tension",
          "Masterplan",
          "Venom",
          "Tygers of Pan Tang",
          "Sabaton",
          "Tank",
          "Pretty Maids",
          "Heaven's Gate",
          "Onslaught",
          "Panzer",
          "√Ångeles del Infierno",
          "Ob√∫s",
          "Loudness"
        ]
      },
      "top_artists": [
        "Judas Priest",
        "Tygers of Pan Tang",
        "Sabaton",
        "Tokyo Blade",
        "King Diamond",
        "High Tension",
        "W.A.S.P.",
        "Omen",
        "Manilla Road",
        "Venom"
      ],
      "top_albums": [
        "Judas Priest - Nostradamus",
        "Sabaton - Metalizer",
        "King Diamond - Voodoo",
        "Venom - Resurrection",
        "Tygers of Pan Tang - The Cage",
        "King Diamond - The Graveyard",
        "Venom - Cast In Stone",
        "Sabaton - The Art of War",
        "Santa - No hay piedad para los condenados",
        "Raven - Nothing Exceeds Like Excess"
      ]
    },
    {
      "name": "metal",
      "count": 593,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 5,
        "sdecandelario": 588
      },
      "user_artists": {
        "Nubis84": [
          "Megadeth",
          "Mastodon",
          "Masterplan",
          "Therapy?",
          "Swallow the Sun"
        ],
        "sdecandelario": [
          "Mercyful Fate",
          "Judas Priest",
          "Moonspell",
          "Tankard",
          "Rainbow",
          "Mot√∂rhead",
          "Iron Maiden",
          "Santa",
          "U.D.O.",
          "King Diamond",
          "Hell",
          "Riot",
          "Quiet Riot",
          "Saxon",
          "Rage",
          "W.A.S.P.",
          "Manilla Road",
          "Steel Horse",
          "Ministry",
          "Impellitteri",
          "Running Wild",
          "Raven",
          "Tokyo Blade",
          "Helloween",
          "High Tension",
          "Masterplan",
          "Sodom",
          "Tygers of Pan Tang",
          "Sabaton",
          "Onslaught",
          "√Ångeles del Infierno",
          "Loudness"
        ]
      },
      "top_artists": [
        "Judas Priest",
        "Tygers of Pan Tang",
        "Sabaton",
        "Tokyo Blade",
        "King Diamond",
        "High Tension",
        "W.A.S.P.",
        "Manilla Road",
        "Raven",
        "Iron Maiden"
      ],
      "top_albums": [
        "Judas Priest - Nostradamus",
        "Sabaton - Metalizer",
        "King Diamond - Voodoo",
        "Tygers of Pan Tang - The Cage",
        "King Diamond - The Graveyard",
        "Sabaton - The Art of War",
        "Santa - No hay piedad para los condenados",
        "Raven - Nothing Exceeds Like Excess",
        "High Tension - High Tension",
        "Iron Maiden - Fear of the Dark"
      ]
    },
    {
      "name": "hard rock",
      "count": 538,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 13,
        "sdecandelario": 525
      },
      "user_artists": {
        "Nubis84": [
          "Rush",
          "Queen",
          "QUEEN with David bowie,",
          "Lynyrd Skynyrd",
          "The Who",
          "Therapy?",
          "Led Zeppelin"
        ],
        "sdecandelario": [
          "Queen",
          "Scorpions",
          "Judas Priest",
          "Rainbow",
          "Mot√∂rhead",
          "Iron Maiden",
          "Santa",
          "U.D.O.",
          "White Lion",
          "Riot",
          "Uriah Heep",
          "Quiet Riot",
          "Saxon",
          "W.A.S.P.",
          "Sobredosis",
          "The Cult",
          "M√∂tley Cr√ºe",
          "Raven",
          "Tokyo Blade",
          "High Tension",
          "Tygers of Pan Tang",
          "Journey",
          "Pretty Maids",
          "√Ångeles del Infierno",
          "Ob√∫s",
          "Loudness",
          "Led Zeppelin",
          "The Black Crowes"
        ]
      },
      "top_artists": [
        "Judas Priest",
        "Tygers of Pan Tang",
        "Tokyo Blade",
        "Led Zeppelin",
        "High Tension",
        "W.A.S.P.",
        "Raven",
        "Iron Maiden",
        "The Cult",
        "Quiet Riot"
      ],
      "top_albums": [
        "Judas Priest - Nostradamus",
        "Led Zeppelin - Physical Graffiti",
        "Tygers of Pan Tang - The Cage",
        "Santa - No hay piedad para los condenados",
        "Raven - Nothing Exceeds Like Excess",
        "High Tension - High Tension",
        "Iron Maiden - Fear of the Dark",
        "Judas Priest - Point of Entry",
        "U.D.O. - Mission No. X",
        "The Cult - The Cult"
      ]
    },
    {
      "name": "rock",
      "count": 260,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 81,
        "sdecandelario": 179
      },
      "user_artists": {
        "Nubis84": [
          "Rush",
          "Queen",
          "John Wesley",
          "Pink Floyd",
          "Katy Perry",
          "QUEEN with David bowie,",
          "Talking Heads",
          "Hawkwind",
          "Marillion",
          "Nick Cave",
          "Lynyrd Skynyrd",
          "◊ê◊ë◊ô◊ë ◊í◊§◊ü",
          "The Beach Boys",
          "The Doors",
          "Nirvana",
          "The Sounds",
          "Simon & Garfunkel",
          "Rage Against the Machine",
          "Yes",
          "John Lennon",
          "The Cure",
          "Soul Coughing",
          "Porcupine Tree",
          "The Beatles",
          "The Who",
          "The Byrds",
          "Riverside",
          "Therapy?",
          "Ritchie Valens",
          "Led Zeppelin",
          "Robin Trower"
        ],
        "sdecandelario": [
          "Queen",
          "White Lion",
          "Rata Blanca",
          "Scorpions",
          "The Cult",
          "M√∂tley Cr√ºe",
          "Journey",
          "Uriah Heep",
          "Rainbow",
          "Quiet Riot",
          "Mot√∂rhead",
          "Iron Maiden",
          "Led Zeppelin",
          "The Black Crowes"
        ]
      },
      "top_artists": [
        "Led Zeppelin",
        "Iron Maiden",
        "The Cult",
        "Quiet Riot",
        "White Lion",
        "Riverside",
        "Rata Blanca",
        "Uriah Heep",
        "Mot√∂rhead",
        "Hawkwind"
      ],
      "top_albums": [
        "Led Zeppelin - Physical Graffiti",
        "Iron Maiden - Fear of the Dark",
        "The Cult - The Cult",
        "White Lion - Big Game",
        "The Cult - Ceremony",
        "Quiet Riot - Rehab",
        "White Lion - Pride",
        "Quiet Riot - Terrified",
        "Uriah Heep - Demons & Wizards",
        "Rata Blanca - Magos, Espadas Y Rosas"
      ]
    },
    {
      "name": "80s",
      "count": 225,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 33,
        "sdecandelario": 192
      },
      "user_artists": {
        "Nubis84": [
          "Queen",
          "The Cure",
          "Talk Talk",
          "Rick James",
          "Talking Heads",
          "New Order"
        ],
        "sdecandelario": [
          "Joy Division",
          "Queen",
          "White Lion",
          "Scorpions",
          "The Cult",
          "M√∂tley Cr√ºe",
          "Journey",
          "Tokyo Blade",
          "Tygers of Pan Tang",
          "W.A.S.P."
        ]
      },
      "top_artists": [
        "Tygers of Pan Tang",
        "Tokyo Blade",
        "W.A.S.P.",
        "The Cult",
        "Talk Talk",
        "White Lion",
        "The Cure",
        "Queen",
        "Talking Heads",
        "Joy Division"
      ],
      "top_albums": [
        "Tygers of Pan Tang - The Cage",
        "The Cult - The Cult",
        "White Lion - Big Game",
        "Tokyo Blade - Blackhearts & Jaded Spades",
        "The Cult - Ceremony",
        "W.A.S.P. - Inside The Electric Circus",
        "Tygers of Pan Tang - Wild Cat",
        "Tokyo Blade - No Remorse",
        "W.A.S.P. - The Crimson Idol",
        "White Lion - Pride"
      ]
    },
    {
      "name": "classic rock",
      "count": 205,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 34,
        "sdecandelario": 171
      },
      "user_artists": {
        "Nubis84": [
          "Rush",
          "Simon & Garfunkel",
          "Queen",
          "Pink Floyd",
          "Marillion",
          "QUEEN with David bowie,",
          "Yes",
          "Lynyrd Skynyrd",
          "The Beatles",
          "The Who",
          "The Byrds",
          "Robin Trower",
          "Led Zeppelin",
          "The Beach Boys",
          "The Doors",
          "John Lennon"
        ],
        "sdecandelario": [
          "Queen",
          "White Lion",
          "Scorpions",
          "The Cult",
          "Journey",
          "Judas Priest",
          "Uriah Heep",
          "Rainbow",
          "Led Zeppelin",
          "The Black Crowes"
        ]
      },
      "top_artists": [
        "Judas Priest",
        "Led Zeppelin",
        "The Cult",
        "White Lion",
        "Uriah Heep",
        "The Beatles",
        "The Doors",
        "Lynyrd Skynyrd",
        "Rush",
        "Queen"
      ],
      "top_albums": [
        "Judas Priest - Nostradamus",
        "Led Zeppelin - Physical Graffiti",
        "Judas Priest - Point of Entry",
        "The Cult - The Cult",
        "White Lion - Big Game",
        "Judas Priest - Stained Class",
        "The Cult - Ceremony",
        "White Lion - Pride",
        "Judas Priest - Jugulator",
        "Uriah Heep - Demons & Wizards"
      ]
    },
    {
      "name": "Power metal",
      "count": 202,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 1,
        "sdecandelario": 201
      },
      "user_artists": {
        "Nubis84": [
          "Masterplan"
        ],
        "sdecandelario": [
          "Vicious Rumors",
          "Impellitteri",
          "Rata Blanca",
          "Sabaton",
          "Running Wild",
          "Pretty Maids",
          "Riot",
          "Heaven's Gate",
          "Omen",
          "Helloween",
          "Masterplan",
          "Rage",
          "Manilla Road",
          "U.D.O."
        ]
      },
      "top_artists": [
        "Sabaton",
        "Omen",
        "Manilla Road",
        "Vicious Rumors",
        "U.D.O.",
        "Rata Blanca",
        "Pretty Maids",
        "Masterplan",
        "Running Wild",
        "Impellitteri"
      ],
      "top_albums": [
        "Sabaton - Metalizer",
        "Sabaton - The Art of War",
        "Vicious Rumors - Word of Mouth",
        "U.D.O. - Mission No. X",
        "Pretty Maids - Wake Up To The Real World",
        "Omen - The Curse",
        "Sabaton - Coat of Arms",
        "U.D.O. - Thunderball",
        "Omen - Warning Of Danger",
        "Vicious Rumors - Vicious Rumors"
      ]
    },
    {
      "name": "Progressive rock",
      "count": 113,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 60,
        "sdecandelario": 53
      },
      "user_artists": {
        "Nubis84": [
          "Rush",
          "John Wesley",
          "Pink Floyd",
          "Marillion",
          "Yes",
          "Hawkwind",
          "Porcupine Tree",
          "Mick Karn",
          "Riverside",
          "Steven Wilson",
          "Led Zeppelin",
          "California Guitar Trio",
          "◊ê◊ë◊ô◊ë ◊í◊§◊ü",
          "Coltsfoot",
          "Nosound"
        ],
        "sdecandelario": [
          "Journey",
          "Led Zeppelin",
          "Uriah Heep"
        ]
      },
      "top_artists": [
        "Led Zeppelin",
        "Riverside",
        "Steven Wilson",
        "Uriah Heep",
        "Hawkwind",
        "Rush",
        "Porcupine Tree",
        "Pink Floyd",
        "Coltsfoot",
        "◊ê◊ë◊ô◊ë ◊í◊§◊ü"
      ],
      "top_albums": [
        "Led Zeppelin - Physical Graffiti",
        "Uriah Heep - Demons & Wizards",
        "Led Zeppelin - Coda",
        "Uriah Heep - Look at Yourself",
        "Led Zeppelin - In Through the Out Door",
        "Led Zeppelin - Houses of the Holy",
        "Steven Wilson - 2003- Live at Tel Aviv [Acoustic]",
        "Steven Wilson - Unreleased Electronic Music Vol.1",
        "Steven Wilson - Insurgentes",
        "Rush - Test for Echo"
      ]
    },
    {
      "name": "speed metal",
      "count": 108,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 1,
        "sdecandelario": 107
      },
      "user_artists": {
        "Nubis84": [
          "Megadeth"
        ],
        "sdecandelario": [
          "Vicious Rumors",
          "Impellitteri",
          "Running Wild",
          "Riot",
          "Raven",
          "Helloween",
          "Mot√∂rhead",
          "Onslaught",
          "Venom",
          "Rage"
        ]
      },
      "top_artists": [
        "Venom",
        "Raven",
        "Vicious Rumors",
        "Onslaught",
        "Mot√∂rhead",
        "Running Wild",
        "Impellitteri",
        "Megadeth",
        "Helloween",
        "Riot"
      ],
      "top_albums": [
        "Venom - Resurrection",
        "Venom - Cast In Stone",
        "Raven - Nothing Exceeds Like Excess",
        "Vicious Rumors - Word of Mouth",
        "Raven - The Pack Is Back",
        "Onslaught - In Search of Sanity",
        "Vicious Rumors - Vicious Rumors",
        "Onslaught - The Force",
        "Mot√∂rhead - Iron Fist",
        "Running Wild - Gates to Purgatory"
      ]
    },
    {
      "name": "thrash metal",
      "count": 105,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 1,
        "sdecandelario": 104
      },
      "user_artists": {
        "Nubis84": [
          "Megadeth"
        ],
        "sdecandelario": [
          "Mercyful Fate",
          "Vicious Rumors",
          "Tankard",
          "Onslaught",
          "Sodom",
          "Venom",
          "Panzer",
          "Ashes from the Storm"
        ]
      },
      "top_artists": [
        "Venom",
        "Vicious Rumors",
        "Tankard",
        "Onslaught",
        "Mercyful Fate",
        "Sodom",
        "Ashes from the Storm",
        "Megadeth",
        "Panzer"
      ],
      "top_albums": [
        "Venom - Resurrection",
        "Venom - Cast In Stone",
        "Vicious Rumors - Word of Mouth",
        "Tankard - The Meaning of Life",
        "Onslaught - In Search of Sanity",
        "Vicious Rumors - Vicious Rumors",
        "Tankard - Stone Cold Sober",
        "Mercyful Fate - Melissa",
        "Sodom - In the Sign of Evil",
        "Ashes from the Storm - Rust"
      ]
    },
    {
      "name": "german",
      "count": 96,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 1,
        "sdecandelario": 95
      },
      "user_artists": {
        "Nubis84": [
          "Masterplan"
        ],
        "sdecandelario": [
          "Tankard",
          "Tanzwut",
          "Helloween",
          "Masterplan",
          "Schelmish",
          "Sodom",
          "Heimataerde",
          "Rage",
          "U.D.O."
        ]
      },
      "top_artists": [
        "Heimataerde",
        "U.D.O.",
        "Tankard",
        "Tanzwut",
        "Sodom",
        "Masterplan",
        "Schelmish",
        "Helloween",
        "Rage"
      ],
      "top_albums": [
        "Heimataerde - Kadavergehorsam",
        "U.D.O. - Mission No. X",
        "Tankard - The Meaning of Life",
        "Heimataerde - Gotteskrieger",
        "U.D.O. - Thunderball",
        "Heimataerde - Leben geben Leben nehmen",
        "Tankard - Stone Cold Sober",
        "Tanzwut - Tanzwut",
        "Sodom - In the Sign of Evil",
        "Masterplan - Masterplan"
      ]
    },
    {
      "name": "black metal",
      "count": 81,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 1,
        "sdecandelario": 80
      },
      "user_artists": {
        "Nubis84": [
          "NegurƒÉ Bunget"
        ],
        "sdecandelario": [
          "Mercyful Fate",
          "Moonspell",
          "Venom",
          "Sodom",
          "King Diamond"
        ]
      },
      "top_artists": [
        "King Diamond",
        "Venom",
        "Mercyful Fate",
        "Sodom",
        "NegurƒÉ Bunget",
        "Moonspell"
      ],
      "top_albums": [
        "King Diamond - Voodoo",
        "Venom - Resurrection",
        "King Diamond - The Graveyard",
        "Venom - Cast In Stone",
        "King Diamond - The Spider's Lullabye",
        "Mercyful Fate - Melissa",
        "Sodom - In the Sign of Evil",
        "Moonspell - Irreligious"
      ]
    },
    {
      "name": "electronic",
      "count": 69,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 66,
        "sdecandelario": 3
      },
      "user_artists": {
        "Nubis84": [
          "Ulrich Schnauss",
          "Vidna Obmana",
          "World's End Girlfriend",
          "J√≥hann J√≥hannsson",
          "Max Richter",
          "Ti√´sto",
          "Memoryhouse",
          "New Order",
          "Digitonal",
          "Madeon",
          "Moby",
          "Karma"
        ],
        "sdecandelario": [
          "Pendulum",
          "Ministry"
        ]
      },
      "top_artists": [
        "Moby",
        "Max Richter",
        "World's End Girlfriend",
        "Digitonal",
        "Vidna Obmana",
        "J√≥hann J√≥hannsson",
        "Madeon",
        "Ulrich Schnauss",
        "Ministry",
        "Karma"
      ],
      "top_albums": [
        "Moby - Wait for Me",
        "Max Richter - Memoryhouse",
        "World's End Girlfriend - SEVEN IDIOTS",
        "Digitonal - Save Your Light for Darker Days",
        "J√≥hann J√≥hannsson - Fordl√¢ndia",
        "Ulrich Schnauss - Far Away Trains Passing By",
        "Ministry - Psalm 69",
        "Vidna Obmana - An Opera for Four Fusion Works  (CD4)",
        "Karma - The Joke's On You",
        "Vidna Obmana - Legacy"
      ]
    },
    {
      "name": "alternative",
      "count": 65,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 63,
        "sdecandelario": 2
      },
      "user_artists": {
        "Nubis84": [
          "Rage Against the Machine",
          "The Cure",
          "Nick Cave",
          "Soul Coughing",
          "Talking Heads",
          "Mogwai",
          "New Order",
          "Therapy?",
          "Ride",
          "Sigur R√≥s",
          "Moby",
          "Nirvana"
        ],
        "sdecandelario": [
          "Joy Division"
        ]
      },
      "top_artists": [
        "Moby",
        "Mogwai",
        "Sigur R√≥s",
        "The Cure",
        "Talking Heads",
        "Soul Coughing",
        "Joy Division",
        "Nick Cave",
        "Rage Against the Machine",
        "Nirvana"
      ],
      "top_albums": [
        "Moby - Wait for Me",
        "Mogwai - Hardcore Will Never Die, But You Will",
        "The Cure - Disintegration",
        "Talking Heads - Talking Heads 77 [w/Bonus Tracks & Interactive Booklet]",
        "Sigur R√≥s - Takk...",
        "Mogwai - Come On Die Young",
        "Joy Division - Still [Collector's Edition]",
        "Nick Cave - Nocturama",
        "Rage Against the Machine - Rage Against The Machine / Evil Empire (Coffret 2 CD)",
        "Mogwai - Ten Rapid"
      ]
    },
    {
      "name": "Progressive metal",
      "count": 62,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 24,
        "sdecandelario": 38
      },
      "user_artists": {
        "Nubis84": [
          "Siren",
          "Riverside",
          "Mastodon",
          "Porcupine Tree"
        ],
        "sdecandelario": [
          "King Diamond"
        ]
      },
      "top_artists": [
        "King Diamond",
        "Riverside",
        "Porcupine Tree",
        "Siren",
        "Mastodon"
      ],
      "top_albums": [
        "King Diamond - Voodoo",
        "King Diamond - The Graveyard",
        "King Diamond - The Spider's Lullabye",
        "Porcupine Tree - Fear of a Blank Planet"
      ]
    },
    {
      "name": "swedish",
      "count": 60,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 1,
        "sdecandelario": 59
      },
      "user_artists": {
        "Nubis84": [
          "The Sounds"
        ],
        "sdecandelario": [
          "Sabaton"
        ]
      },
      "top_artists": [
        "Sabaton",
        "The Sounds"
      ],
      "top_albums": [
        "Sabaton - Metalizer",
        "Sabaton - The Art of War",
        "Sabaton - Coat of Arms",
        "Sabaton - Attero Dominatus",
        "Sabaton - Primo Victoria",
        "The Sounds - Apopse se thelo - Oles oi epityhies"
      ]
    },
    {
      "name": "70s",
      "count": 57,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 5,
        "sdecandelario": 52
      },
      "user_artists": {
        "Nubis84": [
          "Lynyrd Skynyrd",
          "Led Zeppelin"
        ],
        "sdecandelario": [
          "Led Zeppelin",
          "Uriah Heep"
        ]
      },
      "top_artists": [
        "Led Zeppelin",
        "Uriah Heep",
        "Lynyrd Skynyrd"
      ],
      "top_albums": [
        "Led Zeppelin - Physical Graffiti",
        "Uriah Heep - Demons & Wizards",
        "Led Zeppelin - Coda",
        "Uriah Heep - Look at Yourself",
        "Led Zeppelin - In Through the Out Door",
        "Led Zeppelin - Houses of the Holy",
        "Lynyrd Skynyrd - Lynyrd Skynyrd - Rock Legends",
        "Led Zeppelin - The Rolling Stone Magazines 500 Greatest Songs Of All Time",
        "Lynyrd Skynyrd - The Collection"
      ]
    },
    {
      "name": "pop",
      "count": 57,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 37,
        "sdecandelario": 20
      },
      "user_artists": {
        "Nubis84": [
          "Love of Lesbian",
          "Talk Talk",
          "Katy Perry",
          "Rick James",
          "Lucky Soul",
          "The Beatles",
          "Rebecca Black",
          "The Beach Boys",
          "John Lennon"
        ],
        "sdecandelario": [
          "Tank"
        ]
      },
      "top_artists": [
        "Talk Talk",
        "Tank",
        "The Beatles",
        "The Beach Boys",
        "Lucky Soul",
        "John Lennon",
        "Rick James",
        "Rebecca Black",
        "Love of Lesbian",
        "Katy Perry"
      ],
      "top_albums": [
        "Tank - Still at War",
        "Tank - War Machine",
        "The Beatles - Hey Jude",
        "The Beatles - The Rolling Stone Magazines 500 Greatest Songs Of All Time",
        "The Beach Boys - Pet Sounds",
        "The Beach Boys - The Rolling Stone Magazines 500 Greatest Songs Of All Time",
        "John Lennon - The Rolling Stone Magazines 500 Greatest Songs Of All Time",
        "Rick James - 80's"
      ]
    },
    {
      "name": "indie",
      "count": 47,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 45,
        "sdecandelario": 2
      },
      "user_artists": {
        "Nubis84": [
          "Thrushes",
          "Love of Lesbian",
          "Slowdive",
          "Katy Perry",
          "Nick Cave",
          "Soul Coughing",
          "Yulunga",
          "Lucky Soul",
          "Memoryhouse",
          "Mogwai",
          "No",
          "East Hastings",
          "The Charlottes",
          "Ride",
          "Sigur R√≥s",
          "The Besnard Lakes",
          "The Sounds"
        ],
        "sdecandelario": [
          "Joy Division"
        ]
      },
      "top_artists": [
        "Mogwai",
        "Sigur R√≥s",
        "No",
        "East Hastings",
        "Lucky Soul",
        "Soul Coughing",
        "Joy Division",
        "Nick Cave",
        "The Besnard Lakes",
        "The Sounds"
      ],
      "top_albums": [
        "Mogwai - Hardcore Will Never Die, But You Will",
        "Sigur R√≥s - Takk...",
        "Mogwai - Come On Die Young",
        "Joy Division - Still [Collector's Edition]",
        "Nick Cave - Nocturama",
        "Mogwai - Ten Rapid",
        "Mogwai - My Father My King",
        "Mogwai - Rock Action",
        "Mogwai - Young Team",
        "The Besnard Lakes - Tribute To The Beatles - Let It Be Revisited"
      ]
    },
    {
      "name": "hardcore",
      "count": 39,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 4,
        "sdecandelario": 35
      },
      "user_artists": {
        "Nubis84": [
          "No",
          "East Hastings"
        ],
        "sdecandelario": [
          "Heaven's Gate",
          "High Tension"
        ]
      },
      "top_artists": [
        "High Tension",
        "No",
        "East Hastings",
        "Heaven's Gate"
      ],
      "top_albums": [
        "High Tension - High Tension",
        "High Tension - Meanstreak",
        "High Tension - 4",
        "Heaven's Gate - Livin' in Hysteria"
      ]
    },
    {
      "name": "new wave",
      "count": 33,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 31,
        "sdecandelario": 2
      },
      "user_artists": {
        "Nubis84": [
          "Talk Talk",
          "New Order",
          "Talking Heads",
          "The Cure"
        ],
        "sdecandelario": [
          "Joy Division"
        ]
      },
      "top_artists": [
        "Talk Talk",
        "The Cure",
        "Talking Heads",
        "Joy Division",
        "New Order"
      ],
      "top_albums": [
        "The Cure - Disintegration",
        "Talking Heads - Talking Heads 77 [w/Bonus Tracks & Interactive Booklet]",
        "Joy Division - Still [Collector's Edition]",
        "New Order - The Rolling Stone Magazines 500 Greatest Songs Of All Time"
      ]
    },
    {
      "name": "japanese",
      "count": 31,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 21,
        "sdecandelario": 10
      },
      "user_artists": {
        "Nubis84": [
          "Hartfield",
          "World's End Girlfriend",
          "Yasushi Yoshida"
        ],
        "sdecandelario": [
          "Loudness"
        ]
      },
      "top_artists": [
        "World's End Girlfriend",
        "Loudness",
        "Yasushi Yoshida",
        "Hartfield"
      ],
      "top_albums": [
        "World's End Girlfriend - SEVEN IDIOTS",
        "Loudness - Thunder in the East"
      ]
    },
    {
      "name": "british",
      "count": 30,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 15,
        "sdecandelario": 15
      },
      "user_artists": {
        "Nubis84": [
          "Richard Barbieri/Steve Jansen",
          "Marillion",
          "Yes",
          "Lucky Soul",
          "The Beatles",
          "The Who",
          "Ride",
          "John Lennon"
        ],
        "sdecandelario": [
          "Onslaught"
        ]
      },
      "top_artists": [
        "Onslaught",
        "The Beatles",
        "The Who",
        "Lucky Soul",
        "Richard Barbieri/Steve Jansen",
        "John Lennon",
        "Yes",
        "Marillion",
        "Ride"
      ],
      "top_albums": [
        "Onslaught - In Search of Sanity",
        "Onslaught - The Force",
        "The Who - My Generation - The Very Best of The Who",
        "The Beatles - Hey Jude",
        "The Beatles - The Rolling Stone Magazines 500 Greatest Songs Of All Time",
        "Richard Barbieri/Steve Jansen - Stone to Flesh",
        "John Lennon - The Rolling Stone Magazines 500 Greatest Songs Of All Time",
        "Yes - Fragile",
        "Marillion - The Singles '89-'95",
        "Onslaught - Power From Hell"
      ]
    },
    {
      "name": "spanish",
      "count": 25,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 1,
        "sdecandelario": 24
      },
      "user_artists": {
        "Nubis84": [
          "Love of Lesbian"
        ],
        "sdecandelario": [
          "Rata Blanca",
          "La Polla Records",
          "Panzer",
          "Ob√∫s",
          "Steel Horse"
        ]
      },
      "top_artists": [
        "Rata Blanca",
        "Ob√∫s",
        "Steel Horse",
        "Love of Lesbian",
        "La Polla Records",
        "Panzer"
      ],
      "top_albums": [
        "Rata Blanca - Magos, Espadas Y Rosas",
        "Rata Blanca - Rata Blanca",
        "Ob√∫s - Poderoso Como El Trueno",
        "Steel Horse - Wild Power",
        "La Polla Records - Toda La Puta Vida Igual",
        "Panzer - Toca Madera"
      ]
    },
    {
      "name": "electronica",
      "count": 25,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 24,
        "sdecandelario": 1
      },
      "user_artists": {
        "Nubis84": [
          "Moby",
          "Ulrich Schnauss",
          "Ti√´sto"
        ],
        "sdecandelario": [
          "Pendulum"
        ]
      },
      "top_artists": [
        "Moby",
        "Ulrich Schnauss",
        "Ti√´sto",
        "Pendulum"
      ],
      "top_albums": [
        "Moby - Wait for Me",
        "Ulrich Schnauss - Far Away Trains Passing By",
        "Ti√´sto - Magikal Journey -The Hits Collection 1998 - 2008",
        "Pendulum - Watercolour"
      ]
    },
    {
      "name": "soul",
      "count": 24,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 4,
        "sdecandelario": 20
      },
      "user_artists": {
        "Nubis84": [
          "Rick James",
          "The Temptations",
          "Ray Charles",
          "Sam Cooke"
        ],
        "sdecandelario": [
          "Tank"
        ]
      },
      "top_artists": [
        "Tank",
        "Sam Cooke",
        "Ray Charles",
        "Rick James",
        "The Temptations"
      ],
      "top_albums": [
        "Tank - Still at War",
        "Tank - War Machine",
        "Sam Cooke - The Rolling Stone Magazines 500 Greatest Songs Of All Time",
        "Ray Charles - The Rolling Stone Magazines 500 Greatest Songs Of All Time",
        "Rick James - 80's"
      ]
    }
  ],
  "labels": [
    {
      "name": "Epic",
      "count": 9,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 1,
        "sdecandelario": 8
      },
      "user_artists": {
        "Nubis84": [
          "Rick James"
        ],
        "sdecandelario": [
          "Audioslave"
        ]
      },
      "top_artists": [
        "Audioslave",
        "Rick James"
      ],
      "top_albums": [
        "Audioslave - Audioslave",
        "Rick James - 80's"
      ]
    },
    {
      "name": "[no label]",
      "count": 6,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 1,
        "sdecandelario": 5
      },
      "user_artists": {
        "Nubis84": [
          "Coltsfoot"
        ],
        "sdecandelario": [
          "Fejd"
        ]
      },
      "top_artists": [
        "Fejd",
        "Coltsfoot"
      ],
      "top_albums": [
        "Fejd - Eld",
        "Coltsfoot - Action at a Distance"
      ]
    },
    {
      "name": "Columbia",
      "count": 3,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 2,
        "sdecandelario": 1
      },
      "user_artists": {
        "Nubis84": [
          "Blue √ñyster Cult"
        ],
        "sdecandelario": [
          "Judas Priest"
        ]
      },
      "top_artists": [
        "Blue √ñyster Cult",
        "Judas Priest"
      ],
      "top_albums": [
        "Blue √ñyster Cult - Extraterrestrial Live",
        "Judas Priest - Defenders of the Faith"
      ]
    }
  ],
  "years": [
    {
      "name": "2010",
      "count": 46,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 5,
        "sdecandelario": 41
      },
      "user_artists": {
        "Nubis84": [
          "Loreena McKennitt",
          "Steven Wilson",
          "The Cure"
        ],
        "sdecandelario": [
          "Fejd",
          "Bon Jovi",
          "Enforcer",
          "Sabaton"
        ]
      },
      "top_artists": [
        "Sabaton",
        "Fejd",
        "Enforcer",
        "The Cure",
        "Loreena McKennitt",
        "Steven Wilson",
        "Bon Jovi"
      ],
      "top_albums": [
        "Fejd - Eifur",
        "Sabaton - Coat of Arms",
        "Enforcer - Diamonds",
        "Sabaton - Attero Dominatus",
        "The Cure - Disintegration",
        "Loreena McKennitt - Cuarto Milenio - Deluxe",
        "Steven Wilson - Cover Version",
        "Bon Jovi - Bon Jovi Greatest Hits - The Ultimate Collection"
      ]
    },
    {
      "name": "2011",
      "count": 26,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 12,
        "sdecandelario": 14
      },
      "user_artists": {
        "Nubis84": [
          "Bon Iver"
        ],
        "sdecandelario": [
          "Hell",
          "Saxon",
          "Faun"
        ]
      },
      "top_artists": [
        "Bon Iver",
        "Hell",
        "Saxon",
        "Faun"
      ],
      "top_albums": [
        "Bon Iver - Bon Iver",
        "Hell - Human Remains",
        "Saxon - Call To Arms",
        "Faun - Eden"
      ]
    },
    {
      "name": "1984",
      "count": 23,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 1,
        "sdecandelario": 22
      },
      "user_artists": {
        "Nubis84": [
          "Michael Hedges"
        ],
        "sdecandelario": [
          "Sobredosis",
          "Judas Priest",
          "Omen"
        ]
      },
      "top_artists": [
        "Sobredosis",
        "Omen",
        "Michael Hedges",
        "Judas Priest"
      ],
      "top_albums": [
        "Sobredosis - Caliente como un volcan",
        "Omen - Battle Cry",
        "Michael Hedges - Aerial Boundaries",
        "Judas Priest - Defenders of the Faith"
      ]
    },
    {
      "name": "2006",
      "count": 22,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 2,
        "sdecandelario": 20
      },
      "user_artists": {
        "Nubis84": [
          "Bombay Dub Orchestra",
          "Yes"
        ],
        "sdecandelario": [
          "Fejd",
          "Venom",
          "Sol Invictus"
        ]
      },
      "top_artists": [
        "Venom",
        "Fejd",
        "Yes",
        "Bombay Dub Orchestra",
        "Sol Invictus"
      ],
      "top_albums": [
        "Venom - Cast In Stone",
        "Fejd - Eld",
        "Yes - Fragile",
        "Bombay Dub Orchestra - Bombay Dub Orchestra Remixed",
        "Sol Invictus - A Mythological Prospect Of The Citie Of Londinium"
      ]
    },
    {
      "name": "2016",
      "count": 11,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 3,
        "sdecandelario": 8
      },
      "user_artists": {
        "Nubis84": [
          "Steven Wilson"
        ],
        "sdecandelario": [
          "Blackmayne"
        ]
      },
      "top_artists": [
        "Blackmayne",
        "Steven Wilson"
      ],
      "top_albums": [
        "Blackmayne - Blackmayne",
        "Steven Wilson - 2003- Live at Tel Aviv [Acoustic]"
      ]
    },
    {
      "name": "2004",
      "count": 10,
      "users": [
        "sdecandelario",
        "Nubis84"
      ],
      "user_counts": {
        "Nubis84": 1,
        "sdecandelario": 9
      },
      "user_artists": {
        "Nubis84": [
          "Steven Wilson"
        ],
        "sdecandelario": [
          "Tygers of Pan Tang"
        ]
      },
      "top_artists": [
        "Tygers of Pan Tang",
        "Steven Wilson"
      ],
      "top_albums": [
        "Tygers of Pan Tang - Burning in the Shade",
        "Steven Wilson - Cover Version II"
      ]
    }
  ],
  "novelties": {
    "nuevos": {
      "artists": [
        {
          "name": "Agent Steel",
          "count": 30,
          "users": [
            "sdecandelario"
          ],
          "first_date": 1310126902
        },
        {
          "name": "Omen",
          "count": 30,
          "users": [
            "sdecandelario"
          ],
          "first_date": 1310021058
        }
      ],
      "albums": [
        {
          "name": "King Diamond - Voodoo",
          "artist": "King Diamond",
          "album": "Voodoo",
          "count": 14,
          "users": [
            "sdecandelario"
          ],
          "first_date": 1311851303
        },
        {
          "name": "Heimataerde - Kadavergehorsam",
          "artist": "Heimataerde",
          "album": "Kadavergehorsam",
          "count": 14,
          "users": [
            "sdecandelario"
          ],
          "first_date": 1311701798
        },
        {
          "name": "Venom - Resurrection",
          "artist": "Venom",
          "album": "Resurrection",
          "count": 14,
          "users": [
            "sdecandelario"
          ],
          "first_date": 1311441305
        },
        {
          "name": "Santa - No hay piedad para los condenados",
          "artist": "Santa",
          "album": "No hay piedad para los condenados",
          "count": 13,
          "users": [
            "sdecandelario"
          ],
          "first_date": 1311256272
        },
        {
          "name": "Raven - Nothing Exceeds Like Excess",
          "artist": "Raven",
          "album": "Nothing Exceeds Like Excess",
          "count": 13,
          "users": [
            "sdecandelario"
          ],
          "first_date": 1311182310
        },
        {
          "name": "Max Richter - Memoryhouse",
          "artist": "Max Richter",
          "album": "Memoryhouse",
          "count": 16,
          "users": [
            "Nubis84"
          ],
          "first_date": 1311025740
        },
        {
          "name": "King Diamond - The Graveyard",
          "artist": "King Diamond",
          "album": "The Graveyard",
          "count": 14,
          "users": [
            "sdecandelario"
          ],
          "first_date": 1310659679
        },
        {
          "name": "Moby - Wait for Me",
          "artist": "Moby",
          "album": "Wait for Me",
          "count": 21,
          "users": [
            "Nubis84"
          ],
          "first_date": 1310421005
        },
        {
          "name": "Venom - Cast In Stone",
          "artist": "Venom",
          "album": "Cast In Stone",
          "count": 14,
          "users": [
            "sdecandelario"
          ],
          "first_date": 1310306457
        }
      ],
      "tracks": [
        {
          "name": "Blue √ñyster Cult - Veteran Of The Psychic Wars - Live",
          "artist": "Blue √ñyster Cult",
          "track": "Veteran Of The Psychic Wars - Live",
          "count": 2,
          "users": [
            "Nubis84"
          ],
          "first_date": 1311932236
        },
        {
          "name": "Veteran Of The Psychic Wars - Blue Oyster Cult",
          "artist": "Veteran Of The Psychic Wars",
          "track": "Blue Oyster Cult",
          "count": 2,
          "users": [
            "Nubis84"
          ],
          "first_date": 1311864657
        },
        {
          "name": "Derek and the Dominos - Layla",
          "artist": "Derek and the Dominos",
          "track": "Layla",
          "count": 2,
          "users": [
            "Nubis84"
          ],
          "first_date": 1311328739
        },
        {
          "name": "Bon Iver - Perth",
          "artist": "Bon Iver",
          "track": "Perth",
          "count": 3,
          "users": [
            "Nubis84"
          ],
          "first_date": 1311023335
        },
        {
          "name": "Desolation Row - Bob Dylan",
          "artist": "Desolation Row",
          "track": "Bob Dylan",
          "count": 4,
          "users": [
            "Nubis84"
          ],
          "first_date": 1310502315
        },
        {
          "name": "Loreena McKennitt - The Old Ways",
          "artist": "Loreena McKennitt",
          "track": "The Old Ways",
          "count": 3,
          "users": [
            "Nubis84"
          ],
          "first_date": 1310410744
        },
        {
          "name": "Talk Talk - Such a Shame",
          "artist": "Talk Talk",
          "track": "Such a Shame",
          "count": 3,
          "users": [
            "Nubis84"
          ],
          "first_date": 1309878276
        }
      ]
    },
    "nuevos_compartidos": {
      "artists": [],
      "albums": [],
      "tracks": []
    },
    "nuevos_para_usuario": {
      "artists": [],
      "albums": [],
      "tracks": []
    },
    "nuevos_para_usuarios": {
      "Nubis84": {
        "artists": [
          {
            "name": "Masterplan",
            "period_count": 1,
            "total_count": 2,
            "coincident_users": [
              "sdecandelario"
            ],
            "num_coincidences": 1,
            "first_date": 1310810129
          },
          {
            "name": "Enforcer",
            "period_count": 1,
            "total_count": 1,
            "coincident_users": [
              "sdecandelario"
            ],
            "num_coincidences": 1,
            "first_date": 1309876558
          }
        ],
        "albums": [],
        "tracks": [
          {
            "name": "Enforcer - Diamonds",
            "artist": "Enforcer",
            "track": "Diamonds",
            "period_count": 1,
            "total_count": 1,
            "coincident_users": [
              "sdecandelario"
            ],
            "num_coincidences": 1,
            "first_date": 1309876558
          }
        ]
      },
      "sdecandelario": {
        "artists": [
          {
            "name": "Enforcer",
            "period_count": 19,
            "total_count": 66,
            "coincident_users": [
              "Nubis84"
            ],
            "num_coincidences": 1,
            "first_date": 1310763139
          }
        ],
        "albums": [],
        "tracks": [
          {
            "name": "Enforcer - Diamonds",
            "artist": "Enforcer",
            "track": "Diamonds",
            "period_count": 1,
            "total_count": 2,
            "coincident_users": [
              "Nubis84"
            ],
            "num_coincidences": 1,
            "first_date": 1311761957
          }
        ]
      }
    }
  },
  "period_label": "July 2011",
  "from_date": "2011-07-01",
  "to_date": "2011-07-31",
  "generated_at": "2025-11-14 20:06"
};
        const hasNovelties = stats.novelties !== undefined;

        // Funci√≥n para obtener novedades de usuario desde datos precalculados
        function getUserNovelties(user) {
            if (!stats.novelties || !stats.novelties.nuevos_para_usuarios) {
                return { artists: [], albums: [], tracks: [] };
            }

            return stats.novelties.nuevos_para_usuarios[user] || { artists: [], albums: [], tracks: [] };
        }

        // Funcionalidad del bot√≥n de usuario
        function initializeUserSelector() {
            const userButton = document.getElementById('userButton');
            const userModal = document.getElementById('userModal');
            const userModalClose = document.getElementById('userModalClose');
            const userOptions = document.getElementById('userOptions');

            // Cargar usuario guardado desde localStorage
            let selectedUser = localStorage.getItem('lastfm_selected_user') || '';

            // Llenar opciones de usuarios
            availableUsers.forEach(user => {
                const option = document.createElement('div');
                option.className = 'user-option';
                option.dataset.user = user;
                option.textContent = user;
                userOptions.appendChild(option);
            });

            // Marcar opci√≥n seleccionada
            updateSelectedUserOption(selectedUser);

            // Event listeners
            userButton.addEventListener('click', () => {
                userModal.style.display = 'block';
            });

            userModalClose.addEventListener('click', () => {
                userModal.style.display = 'none';
            });

            userModal.addEventListener('click', (e) => {
                if (e.target === userModal) {
                    userModal.style.display = 'none';
                }
            });

            userOptions.addEventListener('click', (e) => {
                if (e.target.classList.contains('user-option')) {
                    const user = e.target.dataset.user;
                    selectedUser = user;

                    // Guardar en localStorage
                    if (user) {
                        localStorage.setItem('lastfm_selected_user', user);
                    } else {
                        localStorage.removeItem('lastfm_selected_user');
                    }

                    updateSelectedUserOption(user);
                    userModal.style.display = 'none';
                    renderStats(); // Re-renderizar con nuevo usuario
                }
            });

            return selectedUser;
        }

        function updateSelectedUserOption(selectedUser) {
            const userOptions = document.getElementById('userOptions');
            userOptions.querySelectorAll('.user-option').forEach(option => {
                option.classList.remove('selected');
                if (option.dataset.user === selectedUser) {
                    option.classList.add('selected');
                }
            });
        }

        // Inicializar categor√≠as activas
        let activeCategories = new Set(['artists']); // Por defecto mostrar artistas
        let selectedUser = '';

        document.getElementById('dateRange').textContent = `${stats.from_date || ''} ‚Üí ${stats.to_date || ''}`;
        document.getElementById('totalScrobbles').textContent = stats.total_scrobbles || 0;
        document.getElementById('generatedAt').textContent = stats.generated_at || '';

        // Manejar filtros de categor√≠as
        const categoryFilters = document.querySelectorAll('.category-filter');
        categoryFilters.forEach(filter => {
            filter.addEventListener('click', () => {
                const category = filter.dataset.category;

                if (activeCategories.has(category)) {
                    activeCategories.delete(category);
                    filter.classList.remove('active');
                } else {
                    activeCategories.add(category);
                    filter.classList.add('active');
                }

                renderStats();
            });
        });

        function showArtistsPopup(itemName, category, user) {
            const item = stats[category].find(item => item.name === itemName);
            if (!item || !item.user_artists || !item.user_artists[user]) return;

            const artists = item.user_artists[user];

            // Crear overlay
            const overlay = document.createElement('div');
            overlay.className = 'popup-overlay';

            // Crear popup
            const popup = document.createElement('div');
            popup.className = 'artists-popup';

            const header = document.createElement('div');
            header.className = 'popup-header';

            const closeBtn = document.createElement('button');
            closeBtn.className = 'popup-close';
            closeBtn.innerHTML = '√ó';
            closeBtn.onclick = () => {
                document.body.removeChild(overlay);
                document.body.removeChild(popup);
            };

            header.innerHTML = `Artistas de ${user} en "${itemName}"`;
            header.appendChild(closeBtn);

            const artistList = document.createElement('ul');
            artistList.className = 'artist-list';

            artists.forEach(artist => {
                const li = document.createElement('li');
                li.textContent = artist;
                artistList.appendChild(li);
            });

            popup.appendChild(header);
            popup.appendChild(artistList);

            // Cerrar al hacer click en overlay
            overlay.onclick = () => {
                document.body.removeChild(overlay);
                document.body.removeChild(popup);
            };

            document.body.appendChild(overlay);
            document.body.appendChild(popup);
        }

        function createNoveltyItem(item, selectedUser) {
            const itemDiv = document.createElement('div');
            itemDiv.className = 'item';

            if (selectedUser && item.users.includes(selectedUser)) {
                itemDiv.classList.add('highlighted');
            }

            const itemName = document.createElement('div');
            itemName.className = 'item-name';
            itemName.textContent = item.name;
            itemDiv.appendChild(itemName);

            const itemMeta = document.createElement('div');
            itemMeta.className = 'item-meta';

            // Conteo de plays si existe
            if (item.count) {
                const countBadge = document.createElement('span');
                countBadge.className = 'badge';
                countBadge.textContent = `${item.count} plays`;
                itemMeta.appendChild(countBadge);
            }

            // Fecha de primer scrobble
            const date = new Date(item.first_date * 1000);
            const dateBadge = document.createElement('span');
            dateBadge.className = 'badge';
            dateBadge.textContent = `Primera vez: ${date.toLocaleDateString('es-ES')}`;
            itemMeta.appendChild(dateBadge);

            // Usuarios que lo han escuchado
            item.users.forEach(user => {
                const userBadge = document.createElement('span');
                userBadge.className = 'user-badge';
                if (user === selectedUser) {
                    userBadge.classList.add('highlighted-user');
                }
                userBadge.textContent = user;
                itemMeta.appendChild(userBadge);
            });

            itemDiv.appendChild(itemMeta);
            return itemDiv;
        }

        function createUserNoveltyItem(item, selectedUser) {
            const itemDiv = document.createElement('div');
            itemDiv.className = 'item';
            itemDiv.classList.add('highlighted'); // Siempre resaltado para el usuario

            const itemName = document.createElement('div');
            itemName.className = 'item-name';
            itemName.textContent = item.name;
            itemDiv.appendChild(itemName);

            const itemMeta = document.createElement('div');
            itemMeta.className = 'item-meta';

            // Total de scrobbles del usuario para este elemento
            if (item.total_count) {
                const totalBadge = document.createElement('span');
                totalBadge.className = 'badge';
                totalBadge.style.background = '#cba6f7';
                totalBadge.style.color = '#1e1e2e';
                totalBadge.textContent = `${item.total_count} total plays`;
                itemMeta.appendChild(totalBadge);
            }

            // Scrobbles en este per√≠odo
            if (item.period_count) {
                const periodBadge = document.createElement('span');
                periodBadge.className = 'badge';
                periodBadge.textContent = `${item.period_count} plays per√≠odo`;
                itemMeta.appendChild(periodBadge);
            }

            // Fecha de primera vez del usuario (si est√° disponible)
            if (item.first_date || item.user_first_date) {
                const date = new Date((item.first_date || item.user_first_date) * 1000);
                const dateBadge = document.createElement('span');
                dateBadge.className = 'badge';
                dateBadge.style.background = '#a6e3a1';
                dateBadge.style.color = '#1e1e2e';
                dateBadge.textContent = `Primera vez: ${date.toLocaleDateString('es-ES')}`;
                itemMeta.appendChild(dateBadge);
            }

            // Usuarios que tambi√©n lo escucharon (coincidencias)
            if (item.coincident_users && item.coincident_users.length > 0) {
                item.coincident_users.forEach(user => {
                    const userBadge = document.createElement('span');
                    userBadge.className = 'user-badge';
                    userBadge.textContent = user;
                    itemMeta.appendChild(userBadge);
                });
            }

            // Informaci√≥n de coincidencias
            if (item.num_coincidences) {
                const coincidencesBadge = document.createElement('span');
                coincidencesBadge.className = 'badge';
                coincidencesBadge.style.background = '#f38ba8';
                coincidencesBadge.style.color = '#1e1e2e';
                coincidencesBadge.textContent = `${item.num_coincidences} coincidencias`;
                itemMeta.appendChild(coincidencesBadge);
            }

            itemDiv.appendChild(itemMeta);
            return itemDiv;
        }

        function renderStats() {
            const container = document.getElementById('categoriesContainer');
            container.innerHTML = '';

            const categoryTitles = {
                artists: 'Artistas M√°s Escuchados',
                tracks: 'Canciones M√°s Escuchadas',
                albums: '√Ålbumes M√°s Escuchados',
                genres: 'G√©neros M√°s Escuchados',
                labels: 'Sellos M√°s Escuchados',
                years: 'A√±os M√°s Escuchados',
                novelties: 'Novedades'
            };

            let hasData = false;

            ['artists', 'tracks', 'albums', 'genres', 'labels', 'years', 'novelties'].forEach(categoryKey => {
                if (!activeCategories.has(categoryKey)) return;

                // Manejo especial para novedades
                if (categoryKey === 'novelties') {
                    if (!hasNovelties || !stats.novelties) return;

                    hasData = true;
                    const categoryDiv = document.createElement('div');
                    categoryDiv.className = 'category visible';
                    categoryDiv.dataset.category = categoryKey;

                    const title = document.createElement('h3');
                    title.textContent = categoryTitles[categoryKey];
                    categoryDiv.appendChild(title);

                    // NUEVOS PARA TODOS
                    const nuevosSection = document.createElement('div');
                    nuevosSection.className = 'novelty-section';

                    const nuevosTitle = document.createElement('h4');
                    nuevosTitle.textContent = 'üÜï Nuevos para todos';
                    nuevosSection.appendChild(nuevosTitle);

                    ['artists', 'albums', 'tracks'].forEach(type => {
                        const subsection = document.createElement('div');
                        subsection.className = 'novelty-subsection';

                        const subsectionTitle = document.createElement('h5');
                        subsectionTitle.textContent = type === 'artists' ? 'Artistas' :
                                                     type === 'albums' ? '√Ålbumes' : 'Canciones';
                        subsection.appendChild(subsectionTitle);

                        const items = stats.novelties.nuevos[type];
                        if (items && items.length > 0) {
                            items.forEach(item => {
                                const itemDiv = createNoveltyItem(item, selectedUser);
                                subsection.appendChild(itemDiv);
                            });
                        } else {
                            const emptyDiv = document.createElement('div');
                            emptyDiv.className = 'novelty-empty';
                            emptyDiv.textContent = 'No hay elementos nuevos';
                            subsection.appendChild(emptyDiv);
                        }

                        nuevosSection.appendChild(subsection);
                    });

                    categoryDiv.appendChild(nuevosSection);

                    // NUEVOS COMPARTIDOS
                    const compartidosSection = document.createElement('div');
                    compartidosSection.className = 'novelty-section';

                    const compartidosTitle = document.createElement('h4');
                    compartidosTitle.textContent = 'üë• Nuevos compartidos (50%+ del grupo)';
                    compartidosSection.appendChild(compartidosTitle);

                    ['artists', 'albums', 'tracks'].forEach(type => {
                        const subsection = document.createElement('div');
                        subsection.className = 'novelty-subsection';

                        const subsectionTitle = document.createElement('h5');
                        subsectionTitle.textContent = type === 'artists' ? 'Artistas' :
                                                     type === 'albums' ? '√Ålbumes' : 'Canciones';
                        subsection.appendChild(subsectionTitle);

                        const items = stats.novelties.nuevos_compartidos[type];
                        if (items && items.length > 0) {
                            items.forEach(item => {
                                const itemDiv = createNoveltyItem(item, selectedUser);
                                subsection.appendChild(itemDiv);
                            });
                        } else {
                            const emptyDiv = document.createElement('div');
                            emptyDiv.className = 'novelty-empty';
                            emptyDiv.textContent = 'No hay elementos nuevos compartidos';
                            subsection.appendChild(emptyDiv);
                        }

                        compartidosSection.appendChild(subsection);
                    });

                    // NUEVOS PARA USUARIO SELECCIONADO
                    if (selectedUser) {
                        const usuarioSection = document.createElement('div');
                        usuarioSection.className = 'novelty-section';

                        const usuarioTitle = document.createElement('h4');
                        usuarioTitle.textContent = `üë§ Nuevos para ${selectedUser} (ya conocidos por el grupo)`;
                        usuarioSection.appendChild(usuarioTitle);

                        // Calcular novedades para el usuario
                        const userNovelties = getUserNovelties(selectedUser);

                        ['artists', 'albums', 'tracks'].forEach(type => {
                            const subsection = document.createElement('div');
                            subsection.className = 'novelty-subsection';

                            const subsectionTitle = document.createElement('h5');
                            subsectionTitle.textContent = type === 'artists' ? 'Artistas' :
                                                         type === 'albums' ? '√Ålbumes' : 'Canciones';
                            subsection.appendChild(subsectionTitle);

                            const items = userNovelties[type];
                            if (items && items.length > 0) {
                                items.forEach(item => {
                                    const itemDiv = createUserNoveltyItem(item, selectedUser);
                                    subsection.appendChild(itemDiv);
                                });
                            } else {
                                const emptyDiv = document.createElement('div');
                                emptyDiv.className = 'novelty-empty';
                                const typeText = type === 'artists' ? 'artistas' :
                                               type === 'albums' ? '√°lbumes' : 'canciones';
                                emptyDiv.textContent = items ?
                                    `No hay ${typeText} nuevos para ${selectedUser} con coincidencias en el per√≠odo` :
                                    'Calculando novedades del usuario...';
                                subsection.appendChild(emptyDiv);
                            }

                            usuarioSection.appendChild(subsection);
                        });

                        categoryDiv.appendChild(usuarioSection);
                    } else {
                        const usuarioSection = document.createElement('div');
                        usuarioSection.className = 'novelty-section';

                        const usuarioTitle = document.createElement('h4');
                        usuarioTitle.textContent = 'üë§ Nuevos para usuario espec√≠fico';
                        usuarioSection.appendChild(usuarioTitle);

                        const infoDiv = document.createElement('div');
                        infoDiv.className = 'novelty-empty';
                        infoDiv.textContent = 'Selecciona un usuario para ver sus novedades personales';
                        usuarioSection.appendChild(infoDiv);

                        categoryDiv.appendChild(usuarioSection);
                    }
                    container.appendChild(categoryDiv);
                    return;
                }

                if (!stats[categoryKey] || stats[categoryKey].length === 0) return;

                hasData = true;
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'category visible';
                categoryDiv.dataset.category = categoryKey;

                const title = document.createElement('h3');
                title.textContent = categoryTitles[categoryKey];
                categoryDiv.appendChild(title);

                stats[categoryKey].forEach(item => {
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'item';

                    if (selectedUser && item.users.includes(selectedUser)) {
                        itemDiv.classList.add('highlighted');
                    }

                    // Hacer clickeable si es g√©nero, a√±o o sello y hay usuario seleccionado
                    const isClickableForUser = ['genres', 'labels', 'years'].includes(categoryKey) &&
                                       selectedUser &&
                                       item.users.includes(selectedUser) &&
                                       item.user_artists &&
                                       item.user_artists[selectedUser];

                    // Hacer expandible si tiene informaci√≥n detallada
                    const isExpandable = ['genres', 'labels', 'years'].includes(categoryKey) &&
                                         ((item.top_artists && item.top_artists.length > 0) ||
                                          (item.top_albums && item.top_albums.length > 0));

                    const itemName = document.createElement('div');
                    itemName.className = 'item-name';
                    itemName.textContent = item.name;

                    if (isExpandable) {
                        itemDiv.classList.add('expandable');
                    }

                    itemDiv.appendChild(itemName);

                    const itemMeta = document.createElement('div');
                    itemMeta.className = 'item-meta';

                    const countBadge = document.createElement('span');
                    countBadge.className = 'badge';
                    countBadge.textContent = `${item.count} plays`;
                    itemMeta.appendChild(countBadge);

                    item.users.sort((a, b) => (item.user_counts[b] || 0) - (item.user_counts[a] || 0));

                    item.users.forEach(user => {
                        const userBadge = document.createElement('span');
                        userBadge.className = 'user-badge';
                        if (user === selectedUser) {
                            userBadge.classList.add('highlighted-user');
                        }

                        const userScrobbles = item.user_counts[user] || 0;
                        userBadge.textContent = `${user} (${userScrobbles})`;

                        if (isClickableForUser && user === selectedUser) {
                            userBadge.style.cursor = 'pointer';
                            userBadge.addEventListener('click', (e) => {
                                e.stopPropagation();
                                showArtistsPopup(item.name, categoryKey, user);
                            });
                        }

                        itemMeta.appendChild(userBadge);
                    });

                    itemDiv.appendChild(itemMeta);

                    // Detalles expandibles
                    if (isExpandable) {
                        const detailsDiv = document.createElement('div');
                        detailsDiv.className = 'details';

                        if (item.top_artists && item.top_artists.length > 0) {
                            const artistSection = document.createElement('div');
                            artistSection.className = 'detail-section';

                            const artistTitle = document.createElement('div');
                            artistTitle.className = 'detail-title';
                            artistTitle.textContent = 'Top Artistas:';
                            artistSection.appendChild(artistTitle);

                            const artistList = document.createElement('div');
                            artistList.className = 'detail-list';

                            item.top_artists.slice(0, 10).forEach(artist => {
                                const artistItem = document.createElement('span');
                                artistItem.className = 'detail-item';
                                artistItem.textContent = artist;
                                artistList.appendChild(artistItem);
                            });

                            artistSection.appendChild(artistList);
                            detailsDiv.appendChild(artistSection);
                        }

                        if (item.top_albums && item.top_albums.length > 0) {
                            const albumSection = document.createElement('div');
                            albumSection.className = 'detail-section';

                            const albumTitle = document.createElement('div');
                            albumTitle.className = 'detail-title';
                            albumTitle.textContent = 'Top √Ålbumes:';
                            albumSection.appendChild(albumTitle);

                            const albumList = document.createElement('div');
                            albumList.className = 'detail-list';

                            item.top_albums.slice(0, 10).forEach(album => {
                                const albumItem = document.createElement('span');
                                albumItem.className = 'detail-item';
                                albumItem.textContent = album;
                                albumList.appendChild(albumItem);
                            });

                            albumSection.appendChild(albumList);
                            detailsDiv.appendChild(albumSection);
                        }

                        itemDiv.appendChild(detailsDiv);

                        itemDiv.addEventListener('click', (e) => {
                            if (e.target.classList.contains('user-badge') && e.target.style.cursor === 'pointer') {
                                return;
                            }

                            itemDiv.classList.toggle('expanded');
                            detailsDiv.classList.toggle('expanded');
                        });
                    }

                    categoryDiv.appendChild(itemDiv);
                });

                container.appendChild(categoryDiv);
            });

            if (!hasData) {
                const noDataDiv = document.createElement('div');
                noDataDiv.className = 'no-data';
                noDataDiv.textContent = 'No hay datos para mostrar con los filtros seleccionados.';
                container.appendChild(noDataDiv);
            }
        }

        // Inicializaci√≥n
        document.addEventListener('DOMContentLoaded', function() {
            selectedUser = initializeUserSelector();
            renderStats();
        });
    </script>
</body>
</html>